"use strict";(self.webpackChunkprueba_tecnica=self.webpackChunkprueba_tecnica||[]).push([[379],{8379:(V,S,o)=>{o.r(S),o.d(S,{AuthModule:()=>m});var C=o(6895),h=o(2019),r=o(433),v=o(805),t=o(1571),T=o(4482),Z=o(5403),I=o(4671),M=o(9751),b=o(4408);const z=new(o(640).v)(b.o);var J=o(3532);var j=o(8421),B=o(529);class u{constructor(n){this.http=n,this.serviceUrl="https://prueba-tecnica-idecide.azurewebsites.net/api"}login(n,s){return this.http.post(this.serviceUrl+"/auth/login",{correo:n,password:s}).pipe(function P(e=1/0){let n;n=e&&"object"==typeof e?e:{count:e};const{count:s=1/0,delay:i,resetOnSuccess:a=!1}=n;return s<=0?I.y:(0,T.e)((c,l)=>{let f,y=0;const A=()=>{let x=!1;f=c.subscribe((0,Z.x)(l,g=>{a&&(y=0),l.next(g)},void 0,g=>{if(y++<s){const F=()=>{f?(f.unsubscribe(),f=null,A()):x=!0};if(null!=i){const Q="number"==typeof i?function Y(e=0,n,s=z){let i=-1;return null!=n&&((0,J.K)(n)?s=n:i=n),new M.y(a=>{let c=function L(e){return e instanceof Date&&!isNaN(e)}(e)?+e-s.now():e;c<0&&(c=0);let l=0;return s.schedule(function(){a.closed||(a.next(l++),0<=i?this.schedule(void 0,i):a.complete())},c)})}(i):(0,j.Xf)(i(g,y)),U=(0,Z.x)(l,()=>{U.unsubscribe(),F()},()=>{l.complete()});Q.subscribe(U)}else F()}else l.error(g)})),x&&(f.unsubscribe(),f=null,A())};A()})}(3))}}u.\u0275fac=function(n){return new(n||u)(t.LFG(B.eN))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var D=o(5593),G=o(4247),R=o(1740),X=o(2453);function E(e,n){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Inicio de sesion"),t.qZA())}const O=function(){return{width:"35rem",padding:"10px"}};class d{constructor(n,s,i,a){this.fb=n,this.messageService=s,this.router=i,this._authService=a,this.loginForm=this.fb.group({username:["test1@gmail.com",[r.kI.required]],password:["123456",[r.kI.required]]})}login(){const{username:n,password:s}=this.loginForm.value;this._authService.login(n,s).subscribe({next:i=>{localStorage.setItem("U-PT",JSON.stringify(i.usuario)),sessionStorage.setItem("token",i.token),console.log(i.token),this.router.navigate(["dashboard"])},error:i=>{if(i.error.msg)return void this.messageService.add({severity:"error",summary:"Error",detail:i.error.msg,life:1500});const a=i.error.errors.map(c=>({severity:"error",summary:"Error",detail:c.msg,life:1500}));this.messageService.addAll(a)}})}}d.\u0275fac=function(n){return new(n||d)(t.Y36(r.qu),t.Y36(v.ez),t.Y36(h.F0),t.Y36(u))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-login"]],features:[t._Bn([v.ez])],decls:16,vars:4,consts:[[1,"container","content-center"],["pTemplate","header"],[1,"content-center"],["autocomplete","off",1,"forms","content-center",3,"formGroup","ngSubmit"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-user"],["type","text","formControlName","username","pInputText","","placeholder","Username"],[1,"pi","pi-key"],["type","password","pInputText","","placeholder","Password","formControlName","password"],[1,"content-center","mt-10"],["type","submit","label","iniciar sesion"],["position","top-right"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"p-card"),t.YNc(2,E,2,0,"ng-template",1),t.TgZ(3,"div",2)(4,"form",3),t.NdJ("ngSubmit",function(){return s.login()}),t.TgZ(5,"div",4)(6,"span",5),t._UZ(7,"i",6),t.qZA(),t._UZ(8,"input",7),t.qZA(),t.TgZ(9,"div",4)(10,"span",5),t._UZ(11,"i",8),t.qZA(),t._UZ(12,"input",9),t.qZA(),t.TgZ(13,"div",10),t._UZ(14,"p-button",11),t.qZA()()()(),t._UZ(15,"p-toast",12),t.qZA()),2&n&&(t.xp6(1),t.Akn(t.DdM(3,O)),t.xp6(3),t.Q6J("formGroup",s.loginForm))},dependencies:[D.zx,G.Z,v.jx,R.o,X.FN,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".content-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:nowrap}.container[_ngcontent-%COMP%]{width:100%;height:95vh}h2[_ngcontent-%COMP%]{text-align:center}.forms[_ngcontent-%COMP%]{flex-direction:column;gap:10px;width:70%}"]});const w=[{path:"",component:d}];class p{}p.\u0275fac=function(n){return new(n||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[h.Bz.forChild(w),h.Bz]});var K=o(5844);class m{}m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[C.ez,p,K.g,r.UX]})}}]);